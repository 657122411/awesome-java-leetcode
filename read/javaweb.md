# 深入分析JavaWeb技术内幕

---

*20191106*

### 1  请求过程

- BS架构基于统一的应用层协议HTTP交互数据，不同于CS使用自定义的应用层协议，更规范。- 
- http采用无状态短链接，一次请求完成一次数据交互（一次业务逻辑），有利于高并发。
- 输入URL后：
  1. DNS将域名解析为IPd地址，找到对应服务器，发起get请求，将返回数据交给用户。

- URL统一资源定位符，独一无二

- 发起一个HTTP请求过程就是建立一个socket通信

- CDN内容分布网络=镜像+缓存+整体负载均衡，提高信息流动效率，以缓存网站静态数据为主（cssjs图片静态数据）

---

### 2  java IO

- IO操作的都是字节而非字符，但有面向字符的接口.
- Java序列化：将对象转化成二进制表示的字节数据，通过保存转移字节数据达到持久化（在纯Java环境下，实现Serializable接口），多语言环境下会难以还原，存储为通用的数据结构Json XML.
- BIO（阻塞IO）一旦阻塞，线程失去cpu使用权，在大访问量和性能要求场景下无法接受（即使使用线程池，还会存在保持大量HTTP长连接的情况），需要NIO.
- 包装模式设计模式：装饰器与适配器，适配器将一个接口转变为另一个接口，通过改变接口达到重复使用的目的，装饰器保持原有接口进行功能增强或处理方法改变提升性能。

### 3中文编码

- 存储信息最小单位byte和表示符号的数据结构char之间的编码。

### 4javac编译

- javac:java源码编译为Java字节码（.java->.class）经历词法分析，语义分析，访问者模式遍历语法树。

### 5class文件

### 6classloader

- 负责将class加载到JVM中，审查每个类该由谁加载，将class字节码重新解析成JVM统一要求的对象格式。

### 7JVM内存结构

1. Java虚拟机将Java运行时数据分为：PC寄存器数据（保存当前正常执行的程序的内存地址）Java栈（每个线程创建，会含有多个栈帧，与方法关联，并含有内部变量，操作栈，函数返回值等信息）；堆（Java对象，被线程共享）；方法区（存储类结构信息，如方法体，构造函数，占用了堆的空间，较少GC,稳定）；本地方法区（为JVM运行native方法准备，在JVM利用JIT技术时将Java方法便以为native code）；运行时常量池（运行时每个class文件中的常量表，数字，方法或域的引用）；

### 8cookie session

- 由于HTTP协议为无状态协议，保持访问用户与后端服务器的交互状态：








